{"componentChunkName":"component---src-templates-blog-post-js","path":"/blog/2010/11/12/backbone-couchdb-Give-your-couchapp-some-backbone.html","result":{"data":{"site":{"siteMetadata":{"title":"Jan Monschke","author":"Jan Monschke"}},"markdownRemark":{"id":"7c9d52f3-01e6-5e29-a063-a3743d1e3574","excerpt":"The code and information about the library in this article may be out of date since this article is pretty old now and was written when the library was first…","html":"<p><strong>The code and information about the library in this article may be out of date since this article is pretty old now and was written when the library was first released. Check the <a href=\"/projects/backbone-couchdb.html\">project page</a> for a more updated description.</strong></p>\n<p>Recently I read a lot about CouchDB, couchapps and Backbone.js and I really liked the way you can create apps with these tools. To combine them I created a connector for Backbone that syncs your Backbone app to your CouchDB. The source is available on <a href=\"https://github.com/janmonschke/backbone-couchdb\">Github</a> and an example couchapp is hosted at <a href=\"https://backbone.couchone.com/backbone-couchapp/_design/backbone-couchapp/index.html\">couchone</a>.</p>\n<p>Vote it up on Hackernews if you like it: <a href=\"https://news.ycombinator.com/item?id=1898726\">vote</a>.</p>\n<p>This is the description that I also published on Github:</p>\n<h2>backbone-couchdb</h2>\n<p>This is a Backbone connector that overrides the default sync-behavior Backbone and connects your app to your <a href=\"https://github.com/apache/couchdb\">CouchDB</a> so that you can <a href=\"https://vimeo.com/11852209\">RELAX</a> and don’t need to worry about server-side code.</p>\n<h3>Why a new connector?</h3>\n<p>I developed this connector because I didn’t want to write a whole new server that persists\nthe models that Backbone.js creates. Instead of writing a server I now only have to write a simple design document\ncontaining one simple view and I’m done with server-side code and can fully concentrate on my Backbone App.</p>\n<p>Also I wanted to get real time updates when my models are changed on the server (e.g. by a second user). The CouchDB changes-feed seemed\nlike a perfect match for this problem.</p>\n<h3>Getting Started</h3>\n<p>All Backbone apps should work normally without any changes. Simply include <code class=\"language-text\">backbone-couchdb.js</code> with its dependencies into your project and configure the connector with your database infos.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">Backbone<span class=\"token punctuation\">.</span>couchConnector<span class=\"token punctuation\">.</span>databaseName <span class=\"token operator\">=</span> <span class=\"token string\">'backbone-couchapp'</span><span class=\"token punctuation\">;</span>\nBackbone<span class=\"token punctuation\">.</span>couchConnector<span class=\"token punctuation\">.</span>ddocName <span class=\"token operator\">=</span> <span class=\"token string\">'backbone-couchapp'</span><span class=\"token punctuation\">;</span>\nBackbone<span class=\"token punctuation\">.</span>couchConnector<span class=\"token punctuation\">.</span>viewName <span class=\"token operator\">=</span> <span class=\"token string\">'byCollection'</span><span class=\"token punctuation\">;</span>\nBackbone<span class=\"token punctuation\">.</span>couchConnector<span class=\"token punctuation\">.</span>enableChanges <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>As you can see you also need to create a new database in your CouchDB and a new design document that contains the following view:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">doc</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>doc<span class=\"token punctuation\">.</span>collection<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    <span class=\"token function\">emit</span><span class=\"token punctuation\">(</span>doc<span class=\"token punctuation\">.</span>collection<span class=\"token punctuation\">,</span> doc<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>If you set <code class=\"language-text\">Backbone.couchConnector.enableChanges</code> to true, the connector will update your models with remote changes in near real time.</p>\n<h3>Give your <a href=\"https://github.com/couchapp/couchapp\">couchapp</a> some backbone</h3>\n<p>An easy way to host single-page apps is to enclose them in a couchapp. I included a sample couchapp project to show you how to create\ncouchapps with backbone and this CouchDB connector. Also there is a step by step tutorial located in the <a href=\"https://github.com/janmonschke/backbone-couchdb/blob/master/backbone-couchapp/README.md\">readme of the couchapp</a>.</p>\n<p>There is an instance of this couchapp running on <a href=\"https://backbone.couchone.com/backbone-couchapp/_design/backbone-couchapp/index.html\">couchone</a> and I uploaded a file with the <a href=\"https://janmonschke.github.com/backbone-couchdb/app.html\">annotated source</a> of the app. (Created with <a href=\"https://github.com/jashkenas/docco\">docco</a>)</p>\n<h3>Dependencies</h3>\n<p><a href=\"https://github.com/documentcloud/backbone\">Backbone.js</a> and therefore <a href=\"https://github.com/documentcloud/underscore\">Underscore.js</a></p>\n<p><a href=\"https://github.com/apache/couchdb/blob/trunk/share/www/script/jquery.couch.js\">jquery.couch.js</a> and therefore <a href=\"https://www.jquery.com/\">jQuery</a></p>\n<h3>Learn more</h3>\n<p>To show how backbone-couchdb works under the hood I created an annotated source file located <a href=\"https://janmonschke.github.com/backbone-couchdb/backbone-couchdb.html\">here</a>.</p>","frontmatter":{"title":"Backbone-couchdb - Give your couchapp some Backbone!","type":"blog","date":"November 12, 2010","pomodoros":3,"keywords":null,"image":null}},"webmentions":{"edges":[]},"likes":{"edges":[]}},"pageContext":{"slug":"/blog/2010/11/12/backbone-couchdb-Give-your-couchapp-some-backbone.html","publicUrl":"https://janmonschke.com/blog/2010/11/12/backbone-couchdb-Give-your-couchapp-some-backbone.html","previous":null,"next":{"fields":{"slug":"/blog/2013/01/06/Javascript-in-university.html"},"frontmatter":{"title":"JavaScript in University","type":"blog"}}}},"staticQueryHashes":["1677560032","3729604799"]}