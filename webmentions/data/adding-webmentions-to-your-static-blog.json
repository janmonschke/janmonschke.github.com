[
  {
    "type": "entry",
    "author": {
      "type": "card",
      "name": "Jan",
      "photo": "https://webmention.io/avatar/media.social.lol/94385a86d0a91df34c7b3f23d9433008ded38e5424efc65946b2e9fa4d288a77.jpg",
      "url": "https://social.lol/@janmon"
    },
    "url": "https://social.lol/@janmon/109777631384556985",
    "published": "2023-01-30T10:15:21",
    "wm-received": "2023-01-30T10:23:57Z",
    "wm-id": 1610313,
    "wm-source": "https://brid.gy/comment/mastodon/@janmon@social.lol/109777627702072379/109777631384556985",
    "wm-target": "https://janmonschke.com/adding-webmentions-to-your-static-blog/",
    "wm-protocol": "webmention",
    "content": {
      "html": "<p>Thanks to <span class=\"h-card\"><a href=\"https://bell.bz/@andy\" class=\"u-url\">@<span>andy</span></a></span> and <span class=\"h-card\"><a href=\"https://social.lol/@sophie\" class=\"u-url\">@<span>sophie</span></a></span> for the inspiration :)</p>",
      "text": "Thanks to @andy and @sophie for the inspiration :)"
    },
    "in-reply-to": "https://janmonschke.com/adding-webmentions-to-your-static-blog/",
    "wm-property": "in-reply-to",
    "wm-private": false
  },
  {
    "type": "entry",
    "author": {
      "type": "card",
      "name": "Juhis",
      "photo": "https://webmention.io/avatar/media.social.lol/4681b01a570ac17b6a3f8ec557578ff027e45fe9d79e5af6b39145bcece82dda.jpg",
      "url": "https://mastodon.world/@hamatti"
    },
    "url": "https://mastodon.world/@hamatti/109777741911560491",
    "published": "2023-01-30T10:43:27",
    "wm-received": "2023-01-30T11:14:40Z",
    "wm-id": 1610345,
    "wm-source": "https://brid.gy/comment/mastodon/@janmon@social.lol/109777627702072379/109777741960270672",
    "wm-target": "https://janmonschke.com/adding-webmentions-to-your-static-blog/",
    "wm-protocol": "webmention",
    "content": {
      "html": "<p><span class=\"h-card\"><a href=\"https://social.lol/@janmon\" class=\"u-url\">@<span>janmon</span></a></span> This was a great read, thanks for writing it! I've been thinking about adding webmentions to my site for a long while now but I've been put off by so many moving pieces (and integrations).</p><p>Maybe this week is the time I pick up that project!</p>",
      "text": "@janmon This was a great read, thanks for writing it! I've been thinking about adding webmentions to my site for a long while now but I've been put off by so many moving pieces (and integrations).Maybe this week is the time I pick up that project!"
    },
    "in-reply-to": "https://janmonschke.com/adding-webmentions-to-your-static-blog/",
    "wm-property": "in-reply-to",
    "wm-private": false
  },
  {
    "type": "entry",
    "author": {
      "type": "card",
      "name": "Rob Anderson",
      "photo": "https://webmention.io/avatar/media.social.lol/58f0928fe136e8aa8a4bdf0861137158f95a762dfd999fe963bc947539523076.jpg",
      "url": "https://hyem.tech/@rob"
    },
    "url": "https://social.lol/@janmon/109777627702072379#reblogged-by-109435415106206989",
    "published": null,
    "wm-received": "2023-01-30T11:14:40Z",
    "wm-id": 1610346,
    "wm-source": "https://brid.gy/repost/mastodon/@janmon@social.lol/109777627702072379/109435415106206989",
    "wm-target": "https://janmonschke.com/adding-webmentions-to-your-static-blog/",
    "wm-protocol": "webmention",
    "repost-of": "https://janmonschke.com/adding-webmentions-to-your-static-blog/",
    "wm-property": "repost-of",
    "wm-private": false
  },
  {
    "type": "entry",
    "author": {
      "type": "card",
      "name": "Márton Salomváry",
      "photo": "https://webmention.io/avatar/media.social.lol/87042648575d2aa2de2c2d66533c63431eec95a82ee47094bc6eb526ec39a356.jpg",
      "url": "https://mastodon.berlin/@mrc"
    },
    "url": "https://social.lol/@janmon/109777627702072379#favorited-by-109722280063246686",
    "published": null,
    "wm-received": "2023-01-30T11:15:42Z",
    "wm-id": 1610347,
    "wm-source": "https://brid.gy/like/mastodon/@janmon@social.lol/109777627702072379/109722280063246686",
    "wm-target": "https://janmonschke.com/adding-webmentions-to-your-static-blog/",
    "wm-protocol": "webmention",
    "like-of": "https://janmonschke.com/adding-webmentions-to-your-static-blog/",
    "wm-property": "like-of",
    "wm-private": false
  },
  {
    "type": "entry",
    "author": {
      "type": "card",
      "name": "Stefan Judis",
      "photo": "https://webmention.io/avatar/pbs.twimg.com/2ba9a47d3ee6152babbedde03f3aa501709fa131fd662c70cfd9c4ee0aca30b6.jpg",
      "url": "https://twitter.com/stefanjudis"
    },
    "url": "https://twitter.com/thedeftone/status/1620004702632169473#favorited-by-380616577",
    "published": null,
    "wm-received": "2023-01-30T11:46:13Z",
    "wm-id": 1610383,
    "wm-source": "https://brid.gy/like/twitter/thedeftone/1620004702632169473/380616577",
    "wm-target": "https://janmonschke.com/adding-webmentions-to-your-static-blog/",
    "wm-protocol": "webmention",
    "like-of": "https://janmonschke.com/adding-webmentions-to-your-static-blog/",
    "wm-property": "like-of",
    "wm-private": false
  },
  {
    "type": "entry",
    "author": {
      "type": "card",
      "name": "Esteban Torres",
      "photo": "https://webmention.io/avatar/pbs.twimg.com/74583f80a05615213b01cf11d2d926ae624d42cf393f5072b508e09fd2fd9216.jpg",
      "url": "https://twitter.com/esttorhe"
    },
    "url": "https://twitter.com/esttorhe/status/1620014912834572288",
    "published": "2023-01-30T11:03:48+00:00",
    "wm-received": "2023-01-30T11:46:28Z",
    "wm-id": 1610384,
    "wm-source": "https://brid.gy/comment/twitter/thedeftone/1620004702632169473/1620014912834572288",
    "wm-target": "https://janmonschke.com/adding-webmentions-to-your-static-blog/",
    "wm-protocol": "webmention",
    "content": {
      "html": "Ohhh. Nice work Jan. \n\nWill definitely try to tinker with this and try to add it to my own website\n<a class=\"u-mention\" href=\"https://janmonschke.com/\"></a>\n<a class=\"u-mention\" href=\"https://twitter.com/thedeftone\"></a>",
      "text": "Ohhh. Nice work Jan. \n\nWill definitely try to tinker with this and try to add it to my own website"
    },
    "in-reply-to": "https://janmonschke.com/adding-webmentions-to-your-static-blog/",
    "wm-property": "in-reply-to",
    "wm-private": false
  },
  {
    "type": "entry",
    "author": {
      "type": "card",
      "name": "Esteban Torres",
      "photo": "https://webmention.io/avatar/pbs.twimg.com/74583f80a05615213b01cf11d2d926ae624d42cf393f5072b508e09fd2fd9216.jpg",
      "url": "https://twitter.com/esttorhe"
    },
    "url": "https://twitter.com/thedeftone/status/1620004702632169473#favorited-by-31261028",
    "published": null,
    "wm-received": "2023-01-30T11:46:28Z",
    "wm-id": 1610385,
    "wm-source": "https://brid.gy/like/twitter/thedeftone/1620004702632169473/31261028",
    "wm-target": "https://janmonschke.com/adding-webmentions-to-your-static-blog/",
    "wm-protocol": "webmention",
    "like-of": "https://janmonschke.com/adding-webmentions-to-your-static-blog/",
    "wm-property": "like-of",
    "wm-private": false
  },
  {
    "type": "entry",
    "author": {
      "type": "card",
      "name": "Simon Hohl",
      "photo": "https://webmention.io/avatar/media.social.lol/de3008fdb11a86c7ce704921c451ef3a6ca0f2ba652f29a9761c0462f20dde63.png",
      "url": "https://home.social/@dersmon"
    },
    "url": "https://social.lol/@janmon/109777627702072379#favorited-by-109353923473060147",
    "published": null,
    "wm-received": "2023-01-30T11:46:30Z",
    "wm-id": 1610386,
    "wm-source": "https://brid.gy/like/mastodon/@janmon@social.lol/109777627702072379/109353923473060147",
    "wm-target": "https://janmonschke.com/adding-webmentions-to-your-static-blog/",
    "wm-protocol": "webmention",
    "like-of": "https://janmonschke.com/adding-webmentions-to-your-static-blog/",
    "wm-property": "like-of",
    "wm-private": false
  },
  {
    "type": "entry",
    "author": {
      "type": "card",
      "name": "Andy Bell",
      "photo": "https://webmention.io/avatar/media.social.lol/cea017ea6e66e1ee7d2f97f7278d83b1aa6a13ccb195c71c06a3e7b04d9bdfa0.jpg",
      "url": "https://bell.bz/@andy"
    },
    "url": "https://social.lol/@janmon/109777627702072379#favorited-by-109365862216270557",
    "published": null,
    "wm-received": "2023-01-30T12:24:38Z",
    "wm-id": 1610419,
    "wm-source": "https://brid.gy/like/mastodon/@janmon@social.lol/109777627702072379/109365862216270557",
    "wm-target": "https://janmonschke.com/adding-webmentions-to-your-static-blog/",
    "wm-protocol": "webmention",
    "like-of": "https://janmonschke.com/adding-webmentions-to-your-static-blog/",
    "wm-property": "like-of",
    "wm-private": false
  },
  {
    "type": "entry",
    "author": {
      "type": "card",
      "name": "Henry",
      "photo": "https://webmention.io/avatar/media.social.lol/2d3c63a237690d230a534d120e4ee48813a409195bf4cb061af204bc8d1fe63e.jpg",
      "url": "https://social.lol/@hl"
    },
    "url": "https://social.lol/@janmon/109777627702072379#favorited-by-109604777636002090",
    "published": null,
    "wm-received": "2023-01-30T12:24:38Z",
    "wm-id": 1610420,
    "wm-source": "https://brid.gy/like/mastodon/@janmon@social.lol/109777627702072379/109604777636002090",
    "wm-target": "https://janmonschke.com/adding-webmentions-to-your-static-blog/",
    "wm-protocol": "webmention",
    "like-of": "https://janmonschke.com/adding-webmentions-to-your-static-blog/",
    "wm-property": "like-of",
    "wm-private": false
  },
  {
    "type": "entry",
    "author": {
      "type": "card",
      "name": "Rob Anderson",
      "photo": "https://webmention.io/avatar/media.social.lol/58f0928fe136e8aa8a4bdf0861137158f95a762dfd999fe963bc947539523076.jpg",
      "url": "https://hyem.tech/@rob"
    },
    "url": "https://social.lol/@janmon/109777627702072379#favorited-by-109435415106206989",
    "published": null,
    "wm-received": "2023-01-30T14:05:49Z",
    "wm-id": 1610491,
    "wm-source": "https://brid.gy/like/mastodon/@janmon@social.lol/109777627702072379/109435415106206989",
    "wm-target": "https://janmonschke.com/adding-webmentions-to-your-static-blog/",
    "wm-protocol": "webmention",
    "like-of": "https://janmonschke.com/adding-webmentions-to-your-static-blog/",
    "wm-property": "like-of",
    "wm-private": false
  },
  {
    "type": "entry",
    "author": {
      "type": "card",
      "name": "Michael Henriksen",
      "photo": "https://webmention.io/avatar/media.social.lol/f3c773ff17ba197727fb1dafae3dd63977d55848ad3ad87df5d3d1710b085e3d.png",
      "url": "https://chaos.social/@michenriksen"
    },
    "url": "https://social.lol/@janmon/109777627702072379#favorited-by-109331349286151910",
    "published": null,
    "wm-received": "2023-01-30T14:33:47Z",
    "wm-id": 1610522,
    "wm-source": "https://brid.gy/like/mastodon/@janmon@social.lol/109777627702072379/109331349286151910",
    "wm-target": "https://janmonschke.com/adding-webmentions-to-your-static-blog/",
    "wm-protocol": "webmention",
    "like-of": "https://janmonschke.com/adding-webmentions-to-your-static-blog/",
    "wm-property": "like-of",
    "wm-private": false
  },
  {
    "type": "entry",
    "author": {
      "type": "card",
      "name": "Jan Monschke (@janmon@social.lol)",
      "photo": "https://webmention.io/avatar/pbs.twimg.com/ca3ad8e6d343c6d7b2069c6c885f79e0e2e53eaab61482b5a471a344cf7780a8.jpg",
      "url": "https://twitter.com/thedeftone"
    },
    "url": "https://twitter.com/thedeftone/status/1620052183713718272",
    "published": "2023-01-30T13:31:54+00:00",
    "wm-received": "2023-01-30T16:17:52Z",
    "wm-id": 1610613,
    "wm-source": "https://brid.gy/comment/twitter/thedeftone/1620004702632169473/1620052183713718272",
    "wm-target": "https://janmonschke.com/adding-webmentions-to-your-static-blog/",
    "wm-protocol": "webmention",
    "content": {
      "html": "Yess, let me know how it goes!\n<a class=\"u-mention\" href=\"https://twitter.com/esttorhe\"></a>",
      "text": "Yess, let me know how it goes!"
    },
    "in-reply-to": "https://janmonschke.com/adding-webmentions-to-your-static-blog/",
    "wm-property": "in-reply-to",
    "wm-private": false
  },
  {
    "type": "entry",
    "author": {
      "type": "card",
      "name": "🇺🇦 @gryzzly@mastodon.social",
      "photo": "https://webmention.io/avatar/pbs.twimg.com/1cea001225e316fea0cd64321f597ce8c13088979442312bfe3f93b43137ea72.jpg",
      "url": "https://twitter.com/gryzzly"
    },
    "url": "https://twitter.com/thedeftone/status/1620004702632169473#favorited-by-10253772",
    "published": null,
    "wm-received": "2023-01-30T16:17:55Z",
    "wm-id": 1610614,
    "wm-source": "https://brid.gy/like/twitter/thedeftone/1620004702632169473/10253772",
    "wm-target": "https://janmonschke.com/adding-webmentions-to-your-static-blog/",
    "wm-protocol": "webmention",
    "like-of": "https://janmonschke.com/adding-webmentions-to-your-static-blog/",
    "wm-property": "like-of",
    "wm-private": false
  },
  {
    "type": "entry",
    "author": {
      "type": "card",
      "name": "michele with one L",
      "photo": "https://webmention.io/avatar/pbs.twimg.com/981eadca03f4d53b672c4ffd90e792c353e8071c4c82c63d09b7e965be1f7fc1.png",
      "url": "https://twitter.com/sheley"
    },
    "url": "https://twitter.com/thedeftone/status/1620004702632169473#favorited-by-17388692",
    "published": null,
    "wm-received": "2023-01-30T16:17:58Z",
    "wm-id": 1610615,
    "wm-source": "https://brid.gy/like/twitter/thedeftone/1620004702632169473/17388692",
    "wm-target": "https://janmonschke.com/adding-webmentions-to-your-static-blog/",
    "wm-protocol": "webmention",
    "like-of": "https://janmonschke.com/adding-webmentions-to-your-static-blog/",
    "wm-property": "like-of",
    "wm-private": false
  },
  {
    "type": "entry",
    "author": {
      "type": "card",
      "name": "Robb Knight :prami:",
      "photo": "https://webmention.io/avatar/media.social.lol/d2b5943b2e687ef31399f8241bd07d88b1140716a89c5e026038eaf8ec5341b7.jpg",
      "url": "https://social.lol/@robb"
    },
    "url": "https://social.lol/@robb/109779567016132895",
    "published": "2023-01-30T18:27:36",
    "wm-received": "2023-01-30T18:37:24Z",
    "wm-id": 1610874,
    "wm-source": "https://brid.gy/comment/mastodon/@janmon@social.lol/109779564599075072/109779567016132895",
    "wm-target": "https://janmonschke.com/adding-webmentions-to-your-static-blog/",
    "wm-protocol": "webmention",
    "content": {
      "html": "<p><span class=\"h-card\"><a href=\"https://social.lol/@janmon\" class=\"u-url\">@<span>janmon</span></a></span> Your post is what reminded me, I just saw it in my RSS!</p>",
      "text": "@janmon Your post is what reminded me, I just saw it in my RSS!"
    },
    "in-reply-to": "https://janmonschke.com/adding-webmentions-to-your-static-blog/",
    "wm-property": "in-reply-to",
    "wm-private": false
  },
  {
    "type": "entry",
    "author": {
      "type": "card",
      "name": "Jan",
      "photo": "https://webmention.io/avatar/media.social.lol/94385a86d0a91df34c7b3f23d9433008ded38e5424efc65946b2e9fa4d288a77.jpg",
      "url": "https://social.lol/@janmon"
    },
    "url": "https://social.lol/@janmon/109779571523369368",
    "published": "2023-01-30T18:28:45",
    "wm-received": "2023-01-30T18:37:24Z",
    "wm-id": 1610875,
    "wm-source": "https://brid.gy/comment/mastodon/@janmon@social.lol/109779564599075072/109779571523369368",
    "wm-target": "https://janmonschke.com/adding-webmentions-to-your-static-blog/",
    "wm-protocol": "webmention",
    "content": {
      "html": "<p><span class=\"h-card\"><a href=\"https://social.lol/@robb\" class=\"u-url\">@<span>robb</span></a></span> 🤩✌️</p>",
      "text": "@robb 🤩✌️"
    },
    "in-reply-to": "https://janmonschke.com/adding-webmentions-to-your-static-blog/",
    "wm-property": "in-reply-to",
    "wm-private": false
  },
  {
    "type": "entry",
    "author": {
      "type": "card",
      "name": "Jan",
      "photo": "https://webmention.io/avatar/media.social.lol/94385a86d0a91df34c7b3f23d9433008ded38e5424efc65946b2e9fa4d288a77.jpg",
      "url": "https://social.lol/@janmon"
    },
    "url": "https://social.lol/@janmon/109778389481723036",
    "published": "2023-01-30T13:28:08",
    "wm-received": "2023-01-30T18:43:30Z",
    "wm-id": 1610882,
    "wm-source": "https://brid.gy/comment/mastodon/@janmon@social.lol/109777627702072379/109778389481723036",
    "wm-target": "https://janmonschke.com/adding-webmentions-to-your-static-blog/",
    "wm-protocol": "webmention",
    "content": {
      "html": "<p><span class=\"h-card\"><a href=\"https://mastodon.world/@hamatti\" class=\"u-url\">@<span>hamatti</span></a></span> Glad you liked it 🎉</p><p>Good luck with your integration. Let me know in case you hit any road blocks!</p>",
      "text": "@hamatti Glad you liked it 🎉Good luck with your integration. Let me know in case you hit any road blocks!"
    },
    "in-reply-to": "https://janmonschke.com/adding-webmentions-to-your-static-blog/",
    "wm-property": "in-reply-to",
    "wm-private": false
  },
  {
    "type": "entry",
    "author": {
      "type": "card",
      "name": "Guillaume Marty",
      "photo": "https://webmention.io/avatar/media.social.lol/f880a3cb33e4e3e50b4041f60034eaf030c115c5bd4231ceff4a5ddb40eb688e.jpg",
      "url": "https://indieweb.social/@gmarty"
    },
    "url": "https://social.lol/@janmon/109777627702072379#favorited-by-109437888941458521",
    "published": null,
    "wm-received": "2023-01-30T18:43:33Z",
    "wm-id": 1610883,
    "wm-source": "https://brid.gy/like/mastodon/@janmon@social.lol/109777627702072379/109437888941458521",
    "wm-target": "https://janmonschke.com/adding-webmentions-to-your-static-blog/",
    "wm-protocol": "webmention",
    "like-of": "https://janmonschke.com/adding-webmentions-to-your-static-blog/",
    "wm-property": "like-of",
    "wm-private": false
  },
  {
    "type": "entry",
    "author": {
      "type": "card",
      "name": "Romain Boulay",
      "photo": "https://webmention.io/avatar/pbs.twimg.com/d12a3ebbc44128b69a7958ffa483d151740a49c7ecbe0f2b1ce9380be1485712.jpg",
      "url": "https://twitter.com/r_boulay"
    },
    "url": "https://twitter.com/thedeftone/status/1620004702632169473#favorited-by-16965828",
    "published": null,
    "wm-received": "2023-01-31T11:06:36Z",
    "wm-id": 1611974,
    "wm-source": "https://brid.gy/like/twitter/thedeftone/1620004702632169473/16965828",
    "wm-target": "https://janmonschke.com/adding-webmentions-to-your-static-blog/",
    "wm-protocol": "webmention",
    "like-of": "https://janmonschke.com/adding-webmentions-to-your-static-blog/",
    "wm-property": "like-of",
    "wm-private": false
  },
  {
    "type": "entry",
    "author": {
      "type": "card",
      "name": "",
      "photo": "",
      "url": ""
    },
    "url": "https://rknight.me/adding-webmentions-to-your-site/",
    "published": null,
    "wm-received": "2023-01-31T13:13:06Z",
    "wm-id": 1612074,
    "wm-source": "https://rknight.me/adding-webmentions-to-your-site/",
    "wm-target": "https://janmonschke.com/adding-webmentions-to-your-static-blog/",
    "wm-protocol": "webmention",
    "mention-of": "https://janmonschke.com/adding-webmentions-to-your-static-blog/",
    "wm-property": "mention-of",
    "wm-private": false
  },
  {
    "type": "entry",
    "author": {
      "type": "card",
      "name": "trovster",
      "photo": "https://webmention.io/avatar/pbs.twimg.com/9164cacb13a6a5ae179f52d1926a290f33a576fd782b65f017a6e17fd02a4891.jpg",
      "url": "https://twitter.com/trovster"
    },
    "url": "https://twitter.com/trovster/status/1630994987742625801",
    "published": "2023-03-01T18:14:42+00:00",
    "wm-received": "2023-03-01T20:27:36Z",
    "wm-id": 1632435,
    "wm-source": "https://brid.gy/post/twitter/thedeftone/1630994987742625801",
    "wm-target": "https://janmonschke.com/adding-webmentions-to-your-static-blog/",
    "wm-protocol": "webmention",
    "content": {
      "html": "🔗 Adding webmentions to your static blog\n\n&gt; Blogs are using webmentions to gather mentions/likes/reposts from all over the internet. Webmentions are a (recommended) standard that allows sites to notify other sites that they’re linking to them.\n\n<a href=\"https://janmonschke.com/adding-webmentions-to-your-static-blog\">janmonschke.com/adding-webment…</a>\n<a class=\"u-mention\" href=\"https://janmonschke.com/adding-webmentions-to-your-static-blog/\"></a>",
      "text": "🔗 Adding webmentions to your static blog\n\n> Blogs are using webmentions to gather mentions/likes/reposts from all over the internet. Webmentions are a (recommended) standard that allows sites to notify other sites that they’re linking to them.\n\njanmonschke.com/adding-webment…"
    },
    "mention-of": "https://janmonschke.com/adding-webmentions-to-your-static-blog/",
    "wm-property": "mention-of",
    "wm-private": false
  },
  {
    "type": "entry",
    "author": {
      "type": "card",
      "name": "",
      "photo": "",
      "url": ""
    },
    "url": "https://ahmad.build/2023/08/08/setting-up-webmention-with-cloudflare-and-astrojs/",
    "published": null,
    "wm-received": "2023-11-23T01:01:36Z",
    "wm-id": 1743426,
    "wm-source": "https://ahmad.build/2023/08/08/setting-up-webmention-with-cloudflare-and-astrojs/",
    "wm-target": "https://janmonschke.com/adding-webmentions-to-your-static-blog/",
    "wm-protocol": "webmention",
    "content": {
      "html": "<p>This is part of effort to own my content. Rather than posting the content elsewhere, post it on my platform instead (this blog).</p>\n<h3>Basic Idea</h3>\n<ol><li><a href=\"https://ahmad.build/2023/08/08/setting-up-webmention-with-cloudflare-and-astrojs/#1-get-data-from-webmentionsio\">get our data from webmentions.io, and store within <code>src/content/webmentions</code> folder</a>,</li>\n<li><a href=\"https://ahmad.build/2023/08/08/setting-up-webmention-with-cloudflare-and-astrojs/#2-create-new-astro-collection\">create new Astro collection called webmentions</a>,</li>\n<li><a href=\"https://ahmad.build/2023/08/08/setting-up-webmention-with-cloudflare-and-astrojs/#3-consume-the-webmention-data\">consume the data - get the collection from step 2 and call wherever</a>,</li>\n<li><a href=\"https://ahmad.build/2023/08/08/setting-up-webmention-with-cloudflare-and-astrojs/#4-push-to-github\">push to GitHub</a>,</li>\n<li><a href=\"https://ahmad.build/2023/08/08/setting-up-webmention-with-cloudflare-and-astrojs/#5-linked-cloudflare-with-github\">link Cloudflare with GitHub</a></li>\n</ol><h4>1. Get data from webmentions.io</h4>\n<p>I’m using script from <a href=\"https://janmonschke.com/adding-webmentions-to-your-static-blog/\">Jan Monschke</a> with a bit of modification. This script will be executed by GitHub action and auto commit to specified folder (in this case, <code>src/content/webmentions</code> folder).</p>\n<pre style=\"background-color:#24292e;\"><code><span><span style=\"color:#F97583;\">import</span><span style=\"color:#E1E4E8;\"> </span><span style=\"color:#79B8FF;\">*</span><span style=\"color:#E1E4E8;\"> </span><span style=\"color:#F97583;\">as</span><span style=\"color:#E1E4E8;\"> https </span><span style=\"color:#F97583;\">from</span><span style=\"color:#E1E4E8;\"> </span><span style=\"color:#9ECBFF;\">\"https\"</span><span style=\"color:#E1E4E8;\">;</span></span>\n<span><span style=\"color:#F97583;\">import</span><span style=\"color:#E1E4E8;\"> </span><span style=\"color:#79B8FF;\">*</span><span style=\"color:#E1E4E8;\"> </span><span style=\"color:#F97583;\">as</span><span style=\"color:#E1E4E8;\"> fs </span><span style=\"color:#F97583;\">from</span><span style=\"color:#E1E4E8;\"> </span><span style=\"color:#9ECBFF;\">\"fs\"</span><span style=\"color:#E1E4E8;\">;</span></span>\n<span><span style=\"color:#F97583;\">import</span><span style=\"color:#E1E4E8;\"> { getSlugFromPathName, getFileName } </span><span style=\"color:#F97583;\">from</span><span style=\"color:#E1E4E8;\"> </span><span style=\"color:#9ECBFF;\">\"../utils/common.js\"</span><span style=\"color:#E1E4E8;\">;</span></span>\n<span></span>\n<span><span style=\"color:#F97583;\">const</span><span style=\"color:#E1E4E8;\"> { </span><span style=\"color:#79B8FF;\">WEBMENTIONS_IO_TOKEN</span><span style=\"color:#E1E4E8;\"> } </span><span style=\"color:#F97583;\">=</span><span style=\"color:#E1E4E8;\"> process.env;</span></span>\n<span><span style=\"color:#F97583;\">const</span><span style=\"color:#E1E4E8;\"> { </span><span style=\"color:#79B8FF;\">HOSTNAME</span><span style=\"color:#E1E4E8;\"> } </span><span style=\"color:#F97583;\">=</span><span style=\"color:#E1E4E8;\"> </span><span style=\"color:#9ECBFF;\">\"ahmad.build\"</span><span style=\"color:#E1E4E8;\">;</span></span>\n<span></span>\n<span><span style=\"color:#F97583;\">async</span><span style=\"color:#E1E4E8;\"> </span><span style=\"color:#F97583;\">function</span><span style=\"color:#E1E4E8;\"> </span><span style=\"color:#B392F0;\">fetchMentions</span><span style=\"color:#E1E4E8;\">() {</span></span>\n<span><span style=\"color:#E1E4E8;\">\t</span><span style=\"color:#F97583;\">const</span><span style=\"color:#E1E4E8;\"> </span><span style=\"color:#79B8FF;\">url</span><span style=\"color:#E1E4E8;\"> </span><span style=\"color:#F97583;\">=</span><span style=\"color:#E1E4E8;\"> </span><span style=\"color:#9ECBFF;\">`https://webmention.io/api/mentions.jf2?domain=${</span><span style=\"color:#79B8FF;\">HOSTNAME</span><span style=\"color:#9ECBFF;\">}&amp;token=${</span><span style=\"color:#79B8FF;\">WEBMENTIONS_IO_TOKEN</span><span style=\"color:#9ECBFF;\">}&amp;per-page=999`</span><span style=\"color:#E1E4E8;\">;</span></span>\n<span></span>\n<span><span style=\"color:#E1E4E8;\">\t</span><span style=\"color:#F97583;\">return</span><span style=\"color:#E1E4E8;\"> </span><span style=\"color:#F97583;\">new</span><span style=\"color:#E1E4E8;\"> </span><span style=\"color:#79B8FF;\">Promise</span><span style=\"color:#E1E4E8;\">((</span><span style=\"color:#FFAB70;\">resolve</span><span style=\"color:#E1E4E8;\">, </span><span style=\"color:#FFAB70;\">reject</span><span style=\"color:#E1E4E8;\">) </span><span style=\"color:#F97583;\">=&gt;</span><span style=\"color:#E1E4E8;\"> {</span></span>\n<span><span style=\"color:#E1E4E8;\">\t\t</span><span style=\"color:#6A737D;\">// create Promise here</span></span>\n<span><span style=\"color:#E1E4E8;\">\t}).</span><span style=\"color:#B392F0;\">then</span><span style=\"color:#E1E4E8;\">((</span><span style=\"color:#FFAB70;\">response</span><span style=\"color:#E1E4E8;\">) </span><span style=\"color:#F97583;\">=&gt;</span><span style=\"color:#E1E4E8;\"> {</span></span>\n<span><span style=\"color:#E1E4E8;\">\t\t</span><span style=\"color:#F97583;\">return</span><span style=\"color:#E1E4E8;\"> response.children;</span></span>\n<span><span style=\"color:#E1E4E8;\">\t});</span></span>\n<span><span style=\"color:#E1E4E8;\">}</span></span>\n<span></span>\n<span><span style=\"color:#B392F0;\">fetchMentions</span><span style=\"color:#E1E4E8;\">().</span><span style=\"color:#B392F0;\">then</span><span style=\"color:#E1E4E8;\">((</span><span style=\"color:#FFAB70;\">webmentions</span><span style=\"color:#E1E4E8;\">) </span><span style=\"color:#F97583;\">=&gt;</span><span style=\"color:#E1E4E8;\"> {</span></span>\n<span><span style=\"color:#E1E4E8;\">\tconsole.</span><span style=\"color:#B392F0;\">log</span><span style=\"color:#E1E4E8;\">(</span><span style=\"color:#9ECBFF;\">`Fetched ${</span><span style=\"color:#E1E4E8;\">webmentions</span><span style=\"color:#9ECBFF;\">.</span><span style=\"color:#79B8FF;\">length</span><span style=\"color:#9ECBFF;\">} webmentions`</span><span style=\"color:#E1E4E8;\">);</span></span>\n<span><span style=\"color:#E1E4E8;\">\twebmentions.</span><span style=\"color:#B392F0;\">forEach</span><span style=\"color:#E1E4E8;\">((</span><span style=\"color:#FFAB70;\">webmention</span><span style=\"color:#E1E4E8;\">) </span><span style=\"color:#F97583;\">=&gt;</span><span style=\"color:#E1E4E8;\"> {</span></span>\n<span><span style=\"color:#E1E4E8;\">\t\t</span><span style=\"color:#6A737D;\">// check if mention exist on disk. If exist, fetch new and overwrite. Else, create new mention.</span></span>\n<span><span style=\"color:#E1E4E8;\">\t\t</span><span style=\"color:#6A737D;\">// write the mention to disk</span></span>\n<span><span style=\"color:#E1E4E8;\">\t});</span></span>\n<span><span style=\"color:#E1E4E8;\">});</span></span></code></pre>\n<p><code>WEBMENTIONS_IO_TOKEN</code> value need to be set on GitHub environment.</p>\n<h4>2. Create new Astro collection</h4>\n<p>To create new collection, we need to edit <code>src/content/config.ts</code>. Remember, Astro allow user to have multiple collections, e.g. notes, webmentions, activity etc. Case below, I’m creating new collection called <code>webmentions</code>.</p>\n<pre style=\"background-color:#24292e;\"><code><span><span style=\"color:#F97583;\">const</span><span style=\"color:#E1E4E8;\"> </span><span style=\"color:#79B8FF;\">webmentionsSchema</span><span style=\"color:#E1E4E8;\"> </span><span style=\"color:#F97583;\">=</span><span style=\"color:#E1E4E8;\"> z.</span><span style=\"color:#B392F0;\">object</span><span style=\"color:#E1E4E8;\">({</span></span>\n<span><span style=\"color:#E1E4E8;\">\turl: z.</span><span style=\"color:#B392F0;\">string</span><span style=\"color:#E1E4E8;\">(),</span></span>\n<span><span style=\"color:#E1E4E8;\">\tpublished: z.coerce.</span><span style=\"color:#B392F0;\">date</span><span style=\"color:#E1E4E8;\">(),</span></span>\n<span><span style=\"color:#E1E4E8;\">\t</span><span style=\"color:#9ECBFF;\">\"wm-property\"</span><span style=\"color:#E1E4E8;\">: z.</span><span style=\"color:#B392F0;\">string</span><span style=\"color:#E1E4E8;\">(),</span></span>\n<span><span style=\"color:#E1E4E8;\">\t</span><span style=\"color:#9ECBFF;\">\"wm-received\"</span><span style=\"color:#E1E4E8;\">: z.coerce.</span><span style=\"color:#B392F0;\">date</span><span style=\"color:#E1E4E8;\">(),</span></span>\n<span><span style=\"color:#E1E4E8;\">\tcontent: z</span></span>\n<span><span style=\"color:#E1E4E8;\">\t\t.</span><span style=\"color:#B392F0;\">object</span><span style=\"color:#E1E4E8;\">({</span></span>\n<span><span style=\"color:#E1E4E8;\">\t\t\ttext: z.</span><span style=\"color:#B392F0;\">string</span><span style=\"color:#E1E4E8;\">().</span><span style=\"color:#B392F0;\">optional</span><span style=\"color:#E1E4E8;\">(),</span></span>\n<span><span style=\"color:#E1E4E8;\">\t\t\thtml: z.</span><span style=\"color:#B392F0;\">string</span><span style=\"color:#E1E4E8;\">().</span><span style=\"color:#B392F0;\">optional</span><span style=\"color:#E1E4E8;\">(),</span></span>\n<span><span style=\"color:#E1E4E8;\">\t\t})</span></span>\n<span><span style=\"color:#E1E4E8;\">\t\t.</span><span style=\"color:#B392F0;\">optional</span><span style=\"color:#E1E4E8;\">(),</span></span>\n<span><span style=\"color:#E1E4E8;\">\tauthor: z.</span><span style=\"color:#B392F0;\">object</span><span style=\"color:#E1E4E8;\">({</span></span>\n<span><span style=\"color:#E1E4E8;\">\t\ttype: z.</span><span style=\"color:#B392F0;\">string</span><span style=\"color:#E1E4E8;\">(),</span></span>\n<span><span style=\"color:#E1E4E8;\">\t\tname: z.</span><span style=\"color:#B392F0;\">string</span><span style=\"color:#E1E4E8;\">(),</span></span>\n<span><span style=\"color:#E1E4E8;\">\t\tphoto: z.</span><span style=\"color:#B392F0;\">string</span><span style=\"color:#E1E4E8;\">(),</span></span>\n<span><span style=\"color:#E1E4E8;\">\t\turl: z.</span><span style=\"color:#B392F0;\">string</span><span style=\"color:#E1E4E8;\">(),</span></span>\n<span><span style=\"color:#E1E4E8;\">\t}),</span></span>\n<span><span style=\"color:#E1E4E8;\">});</span></span>\n<span></span>\n<span><span style=\"color:#F97583;\">const</span><span style=\"color:#E1E4E8;\"> </span><span style=\"color:#79B8FF;\">webmentions</span><span style=\"color:#E1E4E8;\"> </span><span style=\"color:#F97583;\">=</span><span style=\"color:#E1E4E8;\"> </span><span style=\"color:#B392F0;\">defineCollection</span><span style=\"color:#E1E4E8;\">({</span></span>\n<span><span style=\"color:#E1E4E8;\">\ttype: </span><span style=\"color:#9ECBFF;\">\"data\"</span><span style=\"color:#E1E4E8;\">,</span></span>\n<span><span style=\"color:#E1E4E8;\">\tschema: z.</span><span style=\"color:#B392F0;\">array</span><span style=\"color:#E1E4E8;\">(webmentionsSchema),</span></span>\n<span><span style=\"color:#E1E4E8;\">});</span></span></code></pre>\n<h4>3. Consume the webmention data</h4>\n<p>Now that the collection is ready, we can customize it to our liking. In my case, I’m getting <code>like</code> and <code>reply</code>. For that, create 2 component : <code>WebmentionList.astro</code> and <code>WebmentionLike.astro</code></p>\n<h5>WebmentionList.astro</h5>\n<pre style=\"background-color:#24292e;\"><code><span><span style=\"color:#F97583;\">---</span></span>\n<span></span>\n<span><span style=\"color:#F97583;\">const</span><span style=\"color:#E1E4E8;\"> { </span><span style=\"color:#79B8FF;\">toot</span><span style=\"color:#E1E4E8;\"> } </span><span style=\"color:#F97583;\">=</span><span style=\"color:#E1E4E8;\"> Astro.props;</span></span>\n<span></span>\n<span><span style=\"color:#F97583;\">let</span><span style=\"color:#E1E4E8;\"> likeCount </span><span style=\"color:#F97583;\">=</span><span style=\"color:#E1E4E8;\"> [];</span></span>\n<span><span style=\"color:#E1E4E8;\">toot.</span><span style=\"color:#B392F0;\">map</span><span style=\"color:#E1E4E8;\">((</span><span style=\"color:#FFAB70;\">toot</span><span style=\"color:#E1E4E8;\">) </span><span style=\"color:#F97583;\">=&gt;</span><span style=\"color:#E1E4E8;\"> {</span></span>\n<span><span style=\"color:#E1E4E8;\">\t</span><span style=\"color:#F97583;\">if</span><span style=\"color:#E1E4E8;\"> (toot[</span><span style=\"color:#9ECBFF;\">\"wm-property\"</span><span style=\"color:#E1E4E8;\">] </span><span style=\"color:#F97583;\">===</span><span style=\"color:#E1E4E8;\"> </span><span style=\"color:#9ECBFF;\">\"like-of\"</span><span style=\"color:#E1E4E8;\">) {</span></span>\n<span><span style=\"color:#E1E4E8;\">\t\tlikeCount.</span><span style=\"color:#B392F0;\">push</span><span style=\"color:#E1E4E8;\">(toot);</span></span>\n<span><span style=\"color:#E1E4E8;\">\t}</span></span>\n<span><span style=\"color:#E1E4E8;\">});</span></span>\n<span><span style=\"color:#F97583;\">const</span><span style=\"color:#E1E4E8;\"> </span><span style=\"color:#79B8FF;\">tootLikeCount</span><span style=\"color:#E1E4E8;\"> </span><span style=\"color:#F97583;\">=</span><span style=\"color:#E1E4E8;\"> Object.</span><span style=\"color:#B392F0;\">values</span><span style=\"color:#E1E4E8;\">(likeCount).</span><span style=\"color:#79B8FF;\">length</span><span style=\"color:#E1E4E8;\">;</span></span>\n<span></span>\n<span><span style=\"color:#F97583;\">const</span><span style=\"color:#E1E4E8;\"> </span><span style=\"color:#79B8FF;\">hasLike</span><span style=\"color:#E1E4E8;\"> </span><span style=\"color:#F97583;\">=</span><span style=\"color:#E1E4E8;\"> toot.</span><span style=\"color:#B392F0;\">some</span><span style=\"color:#E1E4E8;\">(</span><span style=\"color:#F97583;\">function</span><span style=\"color:#E1E4E8;\"> (</span><span style=\"color:#FFAB70;\">o</span><span style=\"color:#E1E4E8;\">) {</span></span>\n<span><span style=\"color:#E1E4E8;\">\t</span><span style=\"color:#F97583;\">return</span><span style=\"color:#E1E4E8;\"> o[</span><span style=\"color:#9ECBFF;\">\"wm-property\"</span><span style=\"color:#E1E4E8;\">] </span><span style=\"color:#F97583;\">===</span><span style=\"color:#E1E4E8;\"> </span><span style=\"color:#9ECBFF;\">\"like-of\"</span><span style=\"color:#E1E4E8;\">;</span></span>\n<span><span style=\"color:#E1E4E8;\">});</span></span>\n<span><span style=\"color:#F97583;\">---</span></span>\n<span><span style=\"color:#E1E4E8;\">{</span></span>\n<span><span style=\"color:#E1E4E8;\">\ttoot.</span><span style=\"color:#79B8FF;\">length</span><span style=\"color:#E1E4E8;\"> </span><span style=\"color:#F97583;\">&gt;</span><span style=\"color:#E1E4E8;\"> </span><span style=\"color:#79B8FF;\">0</span><span style=\"color:#E1E4E8;\"> </span><span style=\"color:#F97583;\">&amp;&amp;</span><span style=\"color:#E1E4E8;\"> (</span></span>\n<span><span style=\"color:#E1E4E8;\">\t\t&lt;</span><span style=\"color:#85E89D;\">div</span><span style=\"color:#E1E4E8;\"> </span><span style=\"color:#B392F0;\">class</span><span style=\"color:#F97583;\">=</span><span style=\"color:#9ECBFF;\">\"webmentions\"</span><span style=\"color:#E1E4E8;\">&gt;</span></span>\n<span><span style=\"color:#E1E4E8;\">\t\t\t&lt;</span><span style=\"color:#85E89D;\">div</span><span style=\"color:#E1E4E8;\"> </span><span style=\"color:#B392F0;\">class</span><span style=\"color:#F97583;\">=</span><span style=\"color:#9ECBFF;\">\"wm-header\"</span><span style=\"color:#E1E4E8;\">&gt;</span></span>\n<span><span style=\"color:#E1E4E8;\">\t\t\t\t&lt;</span><span style=\"color:#85E89D;\">h3</span><span style=\"color:#E1E4E8;\">&gt;</span></span>\n<span><span style=\"color:#E1E4E8;\">\t\t\t\t\tWebmention</span></span>\n<span><span style=\"color:#E1E4E8;\">\t\t\t\t\t&lt;</span><span style=\"color:#85E89D;\">a</span><span style=\"color:#E1E4E8;\"> </span><span style=\"color:#B392F0;\">href</span><span style=\"color:#F97583;\">=</span><span style=\"color:#9ECBFF;\">\"/toots.xml\"</span><span style=\"color:#E1E4E8;\"> </span><span style=\"color:#B392F0;\">rel</span><span style=\"color:#F97583;\">=</span><span style=\"color:#9ECBFF;\">\"me\"</span><span style=\"color:#E1E4E8;\"> </span><span style=\"color:#B392F0;\">class</span><span style=\"color:#F97583;\">=</span><span style=\"color:#9ECBFF;\">\"rss\"</span><span style=\"color:#E1E4E8;\"> </span><span style=\"color:#B392F0;\">title</span><span style=\"color:#F97583;\">=</span><span style=\"color:#9ECBFF;\">\"RSS for toots\"</span><span style=\"color:#E1E4E8;\"> /&gt;</span></span>\n<span><span style=\"color:#E1E4E8;\">\t\t\t\t&lt;/</span><span style=\"color:#85E89D;\">h3</span><span style=\"color:#E1E4E8;\">&gt;</span></span>\n<span></span>\n<span><span style=\"color:#E1E4E8;\">\t\t\t\t{hasLike </span><span style=\"color:#F97583;\">&amp;&amp;</span><span style=\"color:#E1E4E8;\"> (</span></span>\n<span><span style=\"color:#E1E4E8;\">\t\t\t\t\t&lt;</span><span style=\"color:#85E89D;\">div</span><span style=\"color:#E1E4E8;\"> </span><span style=\"color:#B392F0;\">class</span><span style=\"color:#F97583;\">=</span><span style=\"color:#9ECBFF;\">\"wm-like\"</span><span style=\"color:#E1E4E8;\">&gt;</span></span>\n<span><span style=\"color:#E1E4E8;\">\t\t\t\t\t\t&lt;</span><span style=\"color:#85E89D;\">ul</span><span style=\"color:#E1E4E8;\">&gt;</span></span>\n<span><span style=\"color:#E1E4E8;\">\t\t\t\t\t\t\t{toot.</span><span style=\"color:#B392F0;\">map</span><span style=\"color:#E1E4E8;\">(</span></span>\n<span><span style=\"color:#E1E4E8;\">\t\t\t\t\t\t\t\t(</span><span style=\"color:#FFAB70;\">toot</span><span style=\"color:#E1E4E8;\">) </span><span style=\"color:#F97583;\">=&gt;</span></span>\n<span><span style=\"color:#E1E4E8;\">\t\t\t\t\t\t\t\t\ttoot[</span><span style=\"color:#9ECBFF;\">\"wm-property\"</span><span style=\"color:#E1E4E8;\">] </span><span style=\"color:#F97583;\">==</span><span style=\"color:#E1E4E8;\"> </span><span style=\"color:#9ECBFF;\">\"like-of\"</span><span style=\"color:#E1E4E8;\"> </span><span style=\"color:#F97583;\">&amp;&amp;</span><span style=\"color:#E1E4E8;\"> (</span></span>\n<span><span style=\"color:#E1E4E8;\">\t\t\t\t\t\t\t\t\t\t&lt;</span><span style=\"color:#79B8FF;\">WebmentionLike</span><span style=\"color:#E1E4E8;\"> </span><span style=\"color:#B392F0;\">toot</span><span style=\"color:#F97583;\">=</span><span style=\"color:#E1E4E8;\">{toot} /&gt;</span></span>\n<span><span style=\"color:#E1E4E8;\">\t\t\t\t\t\t\t\t\t)</span></span>\n<span><span style=\"color:#E1E4E8;\">\t\t\t\t\t\t\t)}</span></span>\n<span><span style=\"color:#E1E4E8;\">\t\t\t\t\t\t&lt;/</span><span style=\"color:#85E89D;\">ul</span><span style=\"color:#E1E4E8;\">&gt;</span></span>\n<span><span style=\"color:#E1E4E8;\">\t\t\t\t\t\t&lt;</span><span style=\"color:#85E89D;\">div</span><span style=\"color:#E1E4E8;\"> </span><span style=\"color:#B392F0;\">class</span><span style=\"color:#F97583;\">=</span><span style=\"color:#9ECBFF;\">\"wm-like-count favorite\"</span><span style=\"color:#E1E4E8;\">&gt;</span></span>\n<span><span style=\"color:#E1E4E8;\">\t\t\t\t\t\t\t&lt;</span><span style=\"color:#85E89D;\">small</span><span style=\"color:#E1E4E8;\">&gt;{tootLikeCount </span><span style=\"color:#F97583;\">&gt;</span><span style=\"color:#E1E4E8;\"> </span><span style=\"color:#79B8FF;\">0</span><span style=\"color:#E1E4E8;\"> </span><span style=\"color:#F97583;\">&amp;&amp;</span><span style=\"color:#E1E4E8;\"> tootLikeCount}&lt;/</span><span style=\"color:#85E89D;\">small</span><span style=\"color:#E1E4E8;\">&gt;</span></span>\n<span><span style=\"color:#E1E4E8;\">\t\t\t\t\t\t&lt;/</span><span style=\"color:#85E89D;\">div</span><span style=\"color:#E1E4E8;\">&gt;</span></span>\n<span><span style=\"color:#E1E4E8;\">\t\t\t\t\t&lt;/</span><span style=\"color:#85E89D;\">div</span><span style=\"color:#E1E4E8;\">&gt;</span></span>\n<span><span style=\"color:#E1E4E8;\">\t\t\t\t)}</span></span>\n<span><span style=\"color:#E1E4E8;\">\t\t\t&lt;/</span><span style=\"color:#85E89D;\">div</span><span style=\"color:#E1E4E8;\">&gt;</span></span>\n<span></span>\n<span><span style=\"color:#E1E4E8;\">\t\t\t&lt;</span><span style=\"color:#85E89D;\">ul</span><span style=\"color:#E1E4E8;\"> </span><span style=\"color:#B392F0;\">class</span><span style=\"color:#F97583;\">=</span><span style=\"color:#9ECBFF;\">\"wm-list\"</span><span style=\"color:#E1E4E8;\">&gt;</span></span>\n<span><span style=\"color:#E1E4E8;\">\t\t\t\t{toot.</span><span style=\"color:#B392F0;\">map</span><span style=\"color:#E1E4E8;\">((</span><span style=\"color:#FFAB70;\">toot</span><span style=\"color:#E1E4E8;\">) </span><span style=\"color:#F97583;\">=&gt;</span><span style=\"color:#E1E4E8;\"> (</span></span>\n<span><span style=\"color:#E1E4E8;\">\t\t\t\t\t&lt;</span><span style=\"color:#79B8FF;\">WebmentionCard</span><span style=\"color:#E1E4E8;\"> </span><span style=\"color:#B392F0;\">toot</span><span style=\"color:#F97583;\">=</span><span style=\"color:#E1E4E8;\">{toot} /&gt;</span></span>\n<span><span style=\"color:#E1E4E8;\">\t\t\t\t))}</span></span>\n<span><span style=\"color:#E1E4E8;\">\t\t\t&lt;/</span><span style=\"color:#85E89D;\">ul</span><span style=\"color:#E1E4E8;\">&gt;</span></span>\n<span><span style=\"color:#E1E4E8;\">\t\t&lt;/</span><span style=\"color:#85E89D;\">div</span><span style=\"color:#E1E4E8;\">&gt;</span></span>\n<span><span style=\"color:#E1E4E8;\">\t);</span></span>\n<span><span style=\"color:#E1E4E8;\">}</span></span></code></pre>\n<h5>WebmentionLike.astro</h5>\n<pre style=\"background-color:#24292e;\"><code><span><span style=\"color:#F97583;\">---</span></span>\n<span><span style=\"color:#F97583;\">import</span><span style=\"color:#E1E4E8;\"> </span><span style=\"color:#F97583;\">type</span><span style=\"color:#E1E4E8;\"> { CollectionEntry } </span><span style=\"color:#F97583;\">from</span><span style=\"color:#E1E4E8;\"> </span><span style=\"color:#9ECBFF;\">\"astro:content\"</span><span style=\"color:#E1E4E8;\">;</span></span>\n<span><span style=\"color:#F97583;\">type</span><span style=\"color:#E1E4E8;\"> </span><span style=\"color:#B392F0;\">Props</span><span style=\"color:#E1E4E8;\"> </span><span style=\"color:#F97583;\">=</span><span style=\"color:#E1E4E8;\"> {</span></span>\n<span><span style=\"color:#E1E4E8;\">\t</span><span style=\"color:#FFAB70;\">toot</span><span style=\"color:#F97583;\">:</span><span style=\"color:#E1E4E8;\"> </span><span style=\"color:#B392F0;\">CollectionEntry</span><span style=\"color:#E1E4E8;\">&lt;</span><span style=\"color:#9ECBFF;\">\"toots\"</span><span style=\"color:#E1E4E8;\">&gt;;</span></span>\n<span><span style=\"color:#E1E4E8;\">};</span></span>\n<span><span style=\"color:#F97583;\">const</span><span style=\"color:#E1E4E8;\"> { </span><span style=\"color:#79B8FF;\">toot</span><span style=\"color:#E1E4E8;\"> } </span><span style=\"color:#F97583;\">=</span><span style=\"color:#E1E4E8;\"> Astro.props;</span></span>\n<span><span style=\"color:#F97583;\">---</span></span>\n<span></span>\n<span><span style=\"color:#E1E4E8;\">{</span></span>\n<span><span style=\"color:#E1E4E8;\">\t(</span></span>\n<span><span style=\"color:#E1E4E8;\">\t\t&lt;</span><span style=\"color:#85E89D;\">li</span><span style=\"color:#E1E4E8;\">&gt;</span></span>\n<span><span style=\"color:#E1E4E8;\">\t\t\t&lt;</span><span style=\"color:#85E89D;\">a</span><span style=\"color:#E1E4E8;\"> </span><span style=\"color:#B392F0;\">href</span><span style=\"color:#F97583;\">=</span><span style=\"color:#E1E4E8;\">{toot.author.url}&gt;</span></span>\n<span><span style=\"color:#E1E4E8;\">\t\t\t\t&lt;</span><span style=\"color:#85E89D;\">img</span><span style=\"color:#E1E4E8;\"> </span><span style=\"color:#B392F0;\">class</span><span style=\"color:#F97583;\">=</span><span style=\"color:#9ECBFF;\">\"avatar\"</span><span style=\"color:#E1E4E8;\"> </span><span style=\"color:#B392F0;\">width</span><span style=\"color:#F97583;\">=</span><span style=\"color:#9ECBFF;\">\"32\"</span><span style=\"color:#E1E4E8;\"> </span><span style=\"color:#B392F0;\">height</span><span style=\"color:#F97583;\">=</span><span style=\"color:#9ECBFF;\">\"32\"</span><span style=\"color:#E1E4E8;\"> </span><span style=\"color:#B392F0;\">src</span><span style=\"color:#F97583;\">=</span><span style=\"color:#E1E4E8;\">{toot.author.photo} </span><span style=\"color:#B392F0;\">title</span><span style=\"color:#F97583;\">=</span><span style=\"color:#E1E4E8;\">{toot.author.name} /&gt;</span></span>\n<span><span style=\"color:#E1E4E8;\">\t\t\t&lt;/</span><span style=\"color:#85E89D;\">a</span><span style=\"color:#E1E4E8;\">&gt;</span></span>\n<span><span style=\"color:#E1E4E8;\">\t\t&lt;/</span><span style=\"color:#85E89D;\">li</span><span style=\"color:#E1E4E8;\">&gt;</span></span>\n<span><span style=\"color:#E1E4E8;\">\t)</span></span>\n<span><span style=\"color:#E1E4E8;\">}</span></span>\n<span></span></code></pre>\n<h4>4. Push to GitHub</h4>\n<p>Second last step is to push the code to GitHub. Don’t forget to set <code>WEBMENTIONS_IO_TOKEN</code> on GitHub environment.</p>\n<h4>5. Linked Cloudflare with GitHub</h4>\n<p>Last step is to create new site on Cloudflare and link the site with GitHub repository on previous step.</p>\n<h4>Credit</h4>\n<ol><li><a href=\"https://sebastiandedeyne.com/adding-webmentions-to-my-blog/\">https://sebastiandedeyne.com/adding-webmentions-to-my-blog/</a></li>\n<li><a href=\"https://janmonschke.com/adding-webmentions-to-your-static-blog/\">https://janmonschke.com/adding-webmentions-to-your-static-blog/</a></li>\n</ol>",
      "text": "This is part of effort to own my content. Rather than posting the content elsewhere, post it on my platform instead (this blog).\nBasic Idea\nget our data from webmentions.io, and store within src/content/webmentions folder,\ncreate new Astro collection called webmentions,\nconsume the data - get the collection from step 2 and call wherever,\npush to GitHub,\nlink Cloudflare with GitHub\n1. Get data from webmentions.io\nI’m using script from Jan Monschke with a bit of modification. This script will be executed by GitHub action and auto commit to specified folder (in this case, src/content/webmentions folder).\nimport * as https from \"https\";\nimport * as fs from \"fs\";\nimport { getSlugFromPathName, getFileName } from \"../utils/common.js\";\n\nconst { WEBMENTIONS_IO_TOKEN } = process.env;\nconst { HOSTNAME } = \"ahmad.build\";\n\nasync function fetchMentions() {\n\tconst url = `https://webmention.io/api/mentions.jf2?domain=${HOSTNAME}&token=${WEBMENTIONS_IO_TOKEN}&per-page=999`;\n\n\treturn new Promise((resolve, reject) => {\n\t\t// create Promise here\n\t}).then((response) => {\n\t\treturn response.children;\n\t});\n}\n\nfetchMentions().then((webmentions) => {\n\tconsole.log(`Fetched ${webmentions.length} webmentions`);\n\twebmentions.forEach((webmention) => {\n\t\t// check if mention exist on disk. If exist, fetch new and overwrite. Else, create new mention.\n\t\t// write the mention to disk\n\t});\n});\nWEBMENTIONS_IO_TOKEN value need to be set on GitHub environment.\n2. Create new Astro collection\nTo create new collection, we need to edit src/content/config.ts. Remember, Astro allow user to have multiple collections, e.g. notes, webmentions, activity etc. Case below, I’m creating new collection called webmentions.\nconst webmentionsSchema = z.object({\n\turl: z.string(),\n\tpublished: z.coerce.date(),\n\t\"wm-property\": z.string(),\n\t\"wm-received\": z.coerce.date(),\n\tcontent: z\n\t\t.object({\n\t\t\ttext: z.string().optional(),\n\t\t\thtml: z.string().optional(),\n\t\t})\n\t\t.optional(),\n\tauthor: z.object({\n\t\ttype: z.string(),\n\t\tname: z.string(),\n\t\tphoto: z.string(),\n\t\turl: z.string(),\n\t}),\n});\n\nconst webmentions = defineCollection({\n\ttype: \"data\",\n\tschema: z.array(webmentionsSchema),\n});\n3. Consume the webmention data\nNow that the collection is ready, we can customize it to our liking. In my case, I’m getting like and reply. For that, create 2 component : WebmentionList.astro and WebmentionLike.astro\nWebmentionList.astro\n---\n\nconst { toot } = Astro.props;\n\nlet likeCount = [];\ntoot.map((toot) => {\n\tif (toot[\"wm-property\"] === \"like-of\") {\n\t\tlikeCount.push(toot);\n\t}\n});\nconst tootLikeCount = Object.values(likeCount).length;\n\nconst hasLike = toot.some(function (o) {\n\treturn o[\"wm-property\"] === \"like-of\";\n});\n---\n{\n\ttoot.length > 0 && (\n\t\t<div class=\"webmentions\">\n\t\t\t<div class=\"wm-header\">\n\t\t\t\t<h3>\n\t\t\t\t\tWebmention\n\t\t\t\t\t<a href=\"/toots.xml\" rel=\"me\" class=\"rss\" title=\"RSS for toots\" />\n\t\t\t\t</h3>\n\n\t\t\t\t{hasLike && (\n\t\t\t\t\t<div class=\"wm-like\">\n\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t{toot.map(\n\t\t\t\t\t\t\t\t(toot) =>\n\t\t\t\t\t\t\t\t\ttoot[\"wm-property\"] == \"like-of\" && (\n\t\t\t\t\t\t\t\t\t\t<WebmentionLike toot={toot} />\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t<div class=\"wm-like-count favorite\">\n\t\t\t\t\t\t\t<small>{tootLikeCount > 0 && tootLikeCount}</small>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</div>\n\n\t\t\t<ul class=\"wm-list\">\n\t\t\t\t{toot.map((toot) => (\n\t\t\t\t\t<WebmentionCard toot={toot} />\n\t\t\t\t))}\n\t\t\t</ul>\n\t\t</div>\n\t);\n}\nWebmentionLike.astro\n---\nimport type { CollectionEntry } from \"astro:content\";\ntype Props = {\n\ttoot: CollectionEntry<\"toots\">;\n};\nconst { toot } = Astro.props;\n---\n\n{\n\t(\n\t\t<li>\n\t\t\t<a href={toot.author.url}>\n\t\t\t\t<img class=\"avatar\" width=\"32\" height=\"32\" src={toot.author.photo} title={toot.author.name} />\n\t\t\t</a>\n\t\t</li>\n\t)\n}\n\n4. Push to GitHub\nSecond last step is to push the code to GitHub. Don’t forget to set WEBMENTIONS_IO_TOKEN on GitHub environment.\n5. Linked Cloudflare with GitHub\nLast step is to create new site on Cloudflare and link the site with GitHub repository on previous step.\nCredit\nhttps://sebastiandedeyne.com/adding-webmentions-to-my-blog/\nhttps://janmonschke.com/adding-webmentions-to-your-static-blog/"
    },
    "mention-of": "https://janmonschke.com/adding-webmentions-to-your-static-blog/",
    "wm-property": "mention-of",
    "wm-private": false
  }
]